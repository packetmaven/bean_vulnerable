#!/usr/bin/env python3
import os
import sys
import subprocess
from pathlib import Path

ROOT = Path(__file__).resolve().parent
SRC = ROOT / "src"
venv_python = ROOT / "venv_cli" / "bin" / "python"
python_cmd = str(venv_python) if venv_python.exists() else sys.executable

env = dict(os.environ)
if SRC.exists():
    existing = env.get("PYTHONPATH", "")
    env["PYTHONPATH"] = str(SRC) + (os.pathsep + existing if existing else "")

if __name__ == "__main__":
    result = subprocess.run([python_cmd, "-m", "core.bean_vuln_cli", *sys.argv[1:]], env=env)
    sys.exit(result.returncode)
